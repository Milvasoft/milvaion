{
  "Logging": {
    "LogLevel": {
      "Default": "Debug",
      "Microsoft": "Debug",
      "System": "Debug"
    }
  },
  "MaintenanceConfig": {
    "DatabaseConnectionString": "Host=postgres;Port=5432;Database=MilvaionDb;Username=postgres;Password=N4SQp.qW>6?xwWzg;Command Timeout=300;Include Error Detail=true",
    "RedisConnectionString": "redis:6379",
    "OccurrenceRetention": {
      "CompletedRetentionDays": 30,
      "FailedRetentionDays": 30,
      "CancelledRetentionDays": 30,
      "TimedOutRetentionDays": 30,
      "BatchSize": 10000
    },
    "FailedOccurrenceRetention": {
      "RetentionDays": 30,
      "BatchSize": 10000
    },
    "DatabaseMaintenance": {
      "EnableVacuum": true,
      "EnableAnalyze": true,
      "EnableReindex": false,
      "Tables": [
        "JobOccurrences",
        "ScheduledJobs",
        "FailedOccurrences"
      ]
    },
    "RedisCleanup": {
      "KeyPrefix": "Milvaion:JobScheduler:",
      "CleanOrphanedJobCache": true,
      "CleanStaleLocks": true,
      "CleanOrphanedRunningStates": true,
      "StaleLockHours": 24
    },
    "OccurrenceArchive": {
      "ArchiveAfterDays": 30,
      "ArchiveTablePrefix": "JobOccurrences_Archive",
      "StatusesToArchive": [ 2, 3, 4, 5 ],
      "BatchSize": 10000,
      "CreateIndexOnArchive": false
    },
    "ActivityLogRetention": {
      "RetentionDays": 30
    },
    "NotificationRetention": {
      "SeenRetentionDays": 30,
      "UnseenRetentionDays": 30
    }
  },
  "Worker": {
    "WorkerId": "maintenance-worker-01",
    "MaxParallelJobs": 8,
    "ExecutionTimeoutSeconds": 3600,
    "HealthCheck": {
      "Enabled": true,
      "LiveFilePath": "/tmp/live",
      "ReadyFilePath": "/tmp/ready",
      "IntervalSeconds": 30
    },
    "RabbitMQ": {
      "Host": "rabbitmq",
      "Port": 5672,
      "Username": "guest",
      "Password": "guest",
      "VirtualHost": "/"
    },
    "Redis": {
      "ConnectionString": "redis:6379",
      "Password": "",
      "Database": 0,
      "CancellationChannel": "Milvaion:JobScheduler:cancellation_channel"
    },
    "Heartbeat": {
      "Enabled": true,
      "IntervalSeconds": 5,
      "JobHeartbeatIntervalSeconds": 60
    },
    "OfflineResilience": {
      "Enabled": true,
      "LocalStoragePath": "./worker_data",
      "SyncIntervalSeconds": 30,
      "MaxSyncRetries": 3,
      "CleanupIntervalHours": 1,
      "RecordRetentionDays": 1
    }
  },
  "JobConsumers": {
    "DatabaseMaintenanceJob": {
      "ConsumerId": "db-maintenance-consumer",
      "MaxParallelJobs": 1,
      "ExecutionTimeoutSeconds": 3600,
      "MaxRetries": 1,
      "BaseRetryDelaySeconds": 60,
      "LogUserFriendlyLogsViaLogger": true
    },
    "OccurrenceRetentionJob": {
      "ConsumerId": "occurrence-retention-consumer",
      "MaxParallelJobs": 1,
      "ExecutionTimeoutSeconds": 1800,
      "MaxRetries": 2,
      "BaseRetryDelaySeconds": 30,
      "LogUserFriendlyLogsViaLogger": true
    },
    "FailedOccurrenceCleanupJob": {
      "ConsumerId": "failed-occurrence-consumer",
      "MaxParallelJobs": 1,
      "ExecutionTimeoutSeconds": 900,
      "MaxRetries": 2,
      "BaseRetryDelaySeconds": 30,
      "LogUserFriendlyLogsViaLogger": true
    },
    "RedisCleanupJob": {
      "ConsumerId": "redis-cleanup-consumer",
      "MaxParallelJobs": 1,
      "ExecutionTimeoutSeconds": 600,
      "MaxRetries": 2,
      "BaseRetryDelaySeconds": 30,
      "LogUserFriendlyLogsViaLogger": true
    },
    "OccurrenceArchiveJob": {
      "ConsumerId": "occurrence-archive-consumer",
      "MaxParallelJobs": 1,
      "ExecutionTimeoutSeconds": 3600,
      "MaxRetries": 1,
      "BaseRetryDelaySeconds": 60,
      "LogUserFriendlyLogsViaLogger": true
    },
    "ActivityLogCleanupJob": {
      "ConsumerId": "activity-log-cleanup-consumer",
      "MaxParallelJobs": 1,
      "ExecutionTimeoutSeconds": 600,
      "MaxRetries": 2,
      "BaseRetryDelaySeconds": 30,
      "LogUserFriendlyLogsViaLogger": true
    },
    "NotificationCleanupJob": {
      "ConsumerId": "notification-cleanup-consumer",
      "MaxParallelJobs": 1,
      "ExecutionTimeoutSeconds": 600,
      "MaxRetries": 2,
      "BaseRetryDelaySeconds": 30,
      "LogUserFriendlyLogsViaLogger": true
    }
  }
}
